# Random tricks
## Evil-winrm '!' a jelszoban
* Ha a jelszoban '!' van akkkr agt escapelni kell backslash-el
* E.g.
  * -p "Password1\!"
## sql word wrap fix
* siman kimasolhatjuk a tobb sorra tordelt hosszu sql sorokat egybe a vagolapra
* es ha utana beillesztjuk notepad++-ba, vagy notepadba akkor ott nem lesz sortores, hanem szepen az osszes hosszu sor rendesen jelenik meg
* nem kell egyaltalan semmit sem alakitani rajtuk
## exit from telnet when stuck (like smtp)
<pre>
CTRL + ]
telnet> quit
$ (success)
</pre>
## CURL basic auth !!!!
<pre>
 curl -s -i http://10.10.10.3/ --basic -u user1:Password123
</pre>
## Burp too big payload
* use curl instead
* copy proper headers from burp
  * right click - copy as curl commmand
* merge with the basic curl file upload command
<pre>
# basic curl file upload command
 curl -s -i http://10.10.10.3/ -F "random1=@test_file.txt"
</pre>
## Burp Repeater insert binary data
* create a base64 representation of the binary data / binary file
* insert it into the burp repeater
* right click - convert selection - base64 - base64 decode
## print encoded forms of binary files (in copy-pastable form, not table format, column format)
<pre>
# base64 form (-w 0 means no line breaks)
cat file1 | base64 -w 0
# hex form (-c 1000000 means 1 million columns are used - technically it means no line breaks)
xxd -p -c 1000000 file1
</pre>
## Mit tudunk csinalni az SSH privat kulcsokkal?
* A. bejelentkezunk veluk ssh-n keresztul
<pre>
ssh -i id_rsa username@ip_addr
</pre>
* B. megprobaljuk feltorni !!!
  * es akkor megtalaljuk benne a jelszot!!!
### cracking found SSH private key
<pre>
sudo ssh2john.py id_rsa > hashes.txt
john hashes.txt -w=rockyou.txt
chmod 400 id_rsa
# utana bejelentkezhetunk es meg kell adni a feltort jelszot amikor keri
ssh -i id_rsa username@ip_addr
</pre>  
## ssh error
<pre>
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the ED25519 key sent by the remote host is
SHA256:d0AdbkiUs3q7pFPUAUA7qPxc54l7ieTDllX2Kd4VaqM.
Please contact your system administrator.
Add correct host key in /home/osboxes/.ssh/known_hosts to get rid of this message.
Offending ED25519 key in /home/osboxes/.ssh/known_hosts:9
  remove with:
  ssh-keygen -f "/home/osboxes/.ssh/known_hosts" -R "10.10.1.49"
Host key for 10.10.1.49 has changed and you have requested strict checking.
Host key verification failed.
</pre>
* toroljuk ki vagy nevezzuk at a ~/.ssh/known_hosts file-t
  * es utana akkor jo lesz
## meterpreter and fully functional tty!!!!
* ne hasznaljuk a meterpreter> shell commandot !!!!!
* ha van egy normal shell akkor az egy session
* ha upgradelunk meterpreter-re, akkor az mar egy masodik session!!!
* csak siman fejlesszuk fel az elso session-t es ugraljunk a ket session kozott !!!!
## SSH connection through metasploit
* az ssh_login msf modul alapbol letrehoz egy ssh sessiont a hatterben!!!!!
* csak a username meg a jelszo kell neki, es utana atvaltunk a kesz session-re!!
* (dummy shell-t csinal)
* egybol lehet upgradelni meterpreter shell-re (sessions -u 1)
## FTP - view hidden files
* ftp> ls -la (igen, ls is mukodik, nem csak a dir...)
## "Permission denied" sorok elrejtese linux terminalon
* $ ... 2>/dev/null ...
  * stderr -t /dev/null-ra iranyitjuk
  * pl
    * $ find / -perm /4000
    * $ find / -perm /4000 2>/dev/null
## File-ok keresese access alapjan
* suid bites fajlok
  * $ find / -perm /4000 2>/dev/null
* mindenki altal irhato fajlok
  * $ find / -perm /222 2>/dev/null
## binary file analyzes
* file (file type by magic bytes)
* strings (strings, so references, etc...)
* ldd (linked libraries)
* ltrace (list library calls) (not always installed by default on linux)
* strace (list system calls) (tipically installed by default on linux)
* other usefull commands here
  * env (print environment variables)
  * export valami=value (set an environment variable)
## downloading files from victim machine to attack machine (when no meterpreter shell we have)
* we can do a python server on victim machine too!!!!!!!!!
* and if we download it from browser, we dont have to type the filenames!!!!
## Turn off dark mode of wireshark on kali linux
* $ qt5ct (megnyit egy ablakot, ott atallitjuk a rendszer stilust vilagosra)
* ha kesz vagyunk a wireshark-al utana meg siman visszaallitjuk
## too long file name
* we can user * like below
<pre>
 $ ls
 -rwxr-xr-x 1 root root 77 Nov 12  2020 log_2023_02_01_djfdhfusdhkfjsdhfkjsdhfjkdsfdhfhsdfd.txt
 $ cat log_2023*
 This is a fake log file ...
 $
</pre>
## tul kicsi a kepernyo es nem fer ki pl a ps aux kimenete
* vagy rendes shell-t csinalunk
* vagy kiirjuk fajl-ba es utana a fajlt olvassuk be
## linux persistence through SSH
* $ ssh-keygen -f user1 (generate ssh private and public key)
* $ cat id_rsa.pub >> authorized_keys (append user1 ssh public keys to authorized keys)
* (copy private key to attack machine)
* $ chmod 400 id_rsa (set proper privilege for SSH key) (it is needed to run ssh command)
* evil@attackmachine$ ssh -i id_rsa user1@10.10.10.3 (connect from attack machine through ssh)
### (optional) set local portforwarding through SSH
* ssh -L 1234:127.0.0.1:8080 user@victimmachine
## image steganography (extraction of hidden information from images)
### scanning images and extracting hidden info (with valid password)
* file image.jpg
* strings image.jpg
* steghide info image.jpg (ha ker passwordot is, akkor URES PASSWORD-del probaljuk meg majd!!!!!!)
  * amikor megkerdezi hogy akarunk e keresni benne elrejtett fajlot es ranyomunk hogy igen
  * utana kerni fog password-ot is
  * PROBALJUK MEG URES PASSWORD-del!!!!!!!
  * HA VAN BENNE VALAMI !!!
    * steghide extract -sf image.jpg (es ami benne van azt kipakolja majd)
* foremost -i image.jpg
* binwalk image.jpg
* binwalk -e image.jpg
### cracking (bruteforcing) password of image stego info
* stegcracker image1.jpg rockyou.txt
## reading, processing windows txt files from linux
* windows put \r\n at the end of lines 0x0d 0x0a
* linux only put \n at the end of lines 0x0a
* if we are processing win txt files in linux lines will be fucked because of the extra \r chars
* we need to convert it to unix format
  * dos2unix test file
* the file command output will be different
<pre>
$ file test_file.txt
test_file.txt: ASCII text, with CRLF line terminators
$ file test_file2.txt
test_file2.txt: ASCII text
</pre>
