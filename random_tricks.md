# Random tricks
## ssh error
<pre>
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the ED25519 key sent by the remote host is
SHA256:d0AdbkiUs3q7pFPUAUA7qPxc54l7ieTDllX2Kd4VaqM.
Please contact your system administrator.
Add correct host key in /home/osboxes/.ssh/known_hosts to get rid of this message.
Offending ED25519 key in /home/osboxes/.ssh/known_hosts:9
  remove with:
  ssh-keygen -f "/home/osboxes/.ssh/known_hosts" -R "10.10.1.49"
Host key for 10.10.1.49 has changed and you have requested strict checking.
Host key verification failed.
</pre>
* toroljuk ki vagy nevezzuk at a ~/.ssh/known_hosts file-t
  * es utana akkor jo lesz
## meterpreter and fully functional tty!!!!
* ne hasznaljuk a meterpreter> shell commandot !!!!!
* ha van egy normal shell akkor az egy session
* ha upgradelunk meterpreter-re, akkor az mar egy masodik session!!!
* csak siman fejlesszuk fel az elso session-t es ugraljunk a ket session kozott !!!!
## SSH connection through metasploit
* az ssh_login msf modul alapbol letrehoz egy ssh sessiont a hatterben!!!!!
* csak a username meg a jelszo kell neki, es utana atvaltunk a kesz session-re!!
* (dummy shell-t csinal)
* egybol lehet upgradelni meterpreter shell-re (sessions -u 1)
## FTP - view hidden files
* ftp> ls -la (igen, ls is mukodik, nem csak a dir...)
## "Permission denied" sorok elrejtese linux terminalon
* $ ... 2>/dev/null ...
  * stderr -t /dev/null-ra iranyitjuk
  * pl
    * $ find / -perm /4000
    * $ find / -perm /4000 2>/dev/null
## File-ok keresese access alapjan
* suid bites fajlok
  * $ find / -perm /4000 2>/dev/null
* mindenki altal irhato fajlok
  * $ find / -perm /222 2>/dev/null
## binary file analyzes
* file (file type by magic bytes)
* strings (strings, so references, etc...)
* ldd (linked libraries)
* ltrace (list library calls) (not always installed by default on linux)
* strace (list system calls) (tipically installed by default on linux)
* other usefull commands here
  * env (print environment variables)
  * export valami=value (set an environment variable)
## downloading files from victim machine to attack machine (when no meterpreter shell we have)
* we can do a python server on victim machine too!!!!!!!!!
* and if we download it from browser, we dont have to type the filenames!!!!
## Turn off dark mode of wireshark on kali linux
* $ qt5ct (megnyit egy ablakot, ott atallitjuk a rendszer stilust vilagosra)
* ha kesz vagyunk a wireshark-al utana meg siman visszaallitjuk
## too long file name
* we can user * like below
<pre>
 $ ls
 -rwxr-xr-x 1 root root 77 Nov 12  2020 log_2023_02_01_djfdhfusdhkfjsdhfkjsdhfjkdsfdhfhsdfd.txt
 $ cat log_2023*
 This is a fake log file ...
 $
</pre>
## tul kicsi a kepernyo es nem fer ki pl a ps aux kimenete
* vagy rendes shell-t csinalunk
* vagy kiirjuk fajl-ba es utana a fajlt olvassuk be
## linux persistence through SSH
* $ ssh-keygen -f user1 (generate ssh private and public key)
* $ cat id_rsa.pub >> authorized_keys (append user1 ssh public keys to authorized keys)
* (copy private key to attack machine)
* $ chmod 400 id_rsa (set proper privilege for SSH key) (it is needed to run ssh command)
* evil@attackmachine$ ssh -i id_rsa user1@10.10.10.3 (connect from attack machine through ssh)
### (optional) set local portforwarding through SSH
* ssh -L 1234:127.0.0.1:8080 user@victimmachine
## examining images
* file image.jpg
* strings image.jpg
* steghide info image.jpg (ha ker passwordot is, akkor URES PASSWORD-del probaljuk meg majd!!!!!!)
  * amikor megkerdezi hogy akarunk e keresni benne elrejtett fajlot es ranyomunk hogy igen
  * utana kerni fog password-ot is
  * PROBALJUK MEG URES PASSWORD-del!!!!!!!
  * HA VAN BENNE VALAMI !!!
    * steghide extract -sf image.jpg (es ami benne van azt kipakolja majd)
* foremost -i image.jpg
* binwalk image.jpg
* binwalk -e image.jpg
## reading, processing windows txt files from linux
* windows put \r\n at the end of lines 0x0d 0x0a
* linux only put \n at the end of lines 0x0a
* if we are processing win txt files in linux lines will be fucked because of the extra \r chars
* we need to convert it to unix format
  * dos2unix test file
* the file command output will be different
<pre>
$ file test_file.txt
test_file.txt: ASCII text, with CRLF line terminators
$ file test_file2.txt
test_file2.txt: ASCII text
</pre>
